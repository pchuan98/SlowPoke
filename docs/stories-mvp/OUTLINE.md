# Stories MVP - 大纲

> 基于 PRD-MVP 和核心哲学的用户故事大纲（精简版）

---

## 🔐 认证系统

- [ ] US-001: 用户登录（密码验证 + Cookie）
- [ ] US-002: 用户登出（清除 Cookie）
- [ ] US-003: 未认证拦截（跳转登录页）

---

## 📝 TODO 基础操作（CRUD）

### 创建
- [ ] US-101: 创建空 TODO（自动生成 ID）
- [ ] US-102: 创建带标题的 TODO
- [ ] US-103: 创建 TODO 时添加扩展字段（status/priority/project/tags 等）
- [ ] US-104: 创建 TODO 时编辑 Markdown 内容

### 读取
- [ ] US-111: 查看 TODO 列表（不含正文内容）
- [ ] US-112: 查看单个 TODO 详情（含正文内容）
- [ ] US-113: 列表支持分页
- [ ] US-114: 列表支持排序（按创建时间/更新时间）

### 更新
- [ ] US-121: 编辑 TODO 标题
- [ ] US-122: 编辑 TODO 扩展字段
- [ ] US-123: 编辑 TODO Markdown 内容
- [ ] US-124: 保存时自动更新 updatedAt

### 删除
- [ ] US-131: 软删除 TODO（标记 deleted=true）
- [ ] US-132: 删除确认对话框
- [ ] US-133: 列表自动过滤已删除项

---

## 🎨 List 视图

- [ ] US-201: 以列表形式展示 TODO（标题 + 创建时间）
- [ ] US-202: 显示扩展字段徽章（status/priority/project）
- [ ] US-203: 点击 TODO 进入详情/编辑页
- [ ] US-204: List 视图中快速删除 TODO

---

## 📄 Markdown 编辑器

- [ ] US-301: 集成 Markdown 编辑器（所见即所得）
- [ ] US-302: 编辑器支持实时预览
- [ ] US-303: YAML Front Matter 与 Markdown 内容分离编辑
- [ ] US-304: 扩展字段表单 + Markdown 编辑器联动

---

## 💾 双存储架构

### 数据库索引
- [ ] US-401: TODO 创建时写入 SQLite 索引
- [ ] US-402: TODO 更新时同步数据库索引
- [ ] US-403: TODO 删除时更新索引标记

### Markdown 文件
- [ ] US-411: TODO 创建时生成 Markdown 文件（data/todos/{id}.md）
- [ ] US-412: TODO 更新时同步更新 Markdown 文件
- [ ] US-413: 删除时在 YAML 添加 deleted 和 deletedAt 字段

### 文件同步
- [ ] US-421: 启动时扫描 Markdown 文件，重建索引
- [ ] US-422: 检测外部修改（对比文件修改时间）
- [ ] US-423: 外部修改时重新解析 Markdown 文件

---

## 🔧 系统功能

- [ ] US-501: 配置文件管理（密码、存储路径等）
- [ ] US-502: 统一异常处理（错误提示）
- [ ] US-503: 结构化日志（Serilog）
- [ ] US-504: API 统一响应格式

---

## 🚀 部署

- [ ] US-601: Docker 单容器部署
- [ ] US-602: 数据持久化挂载（data/ 目录）
- [ ] US-603: 首次启动初始化（默认密码提示）

---

## 📊 未来功能（P1+）

_以下功能不在 MVP 范围内，仅作为后续迭代参考_

### 视图扩展
- [ ] Table 视图（表格展示 + 多列排序）
- [ ] Kanban 视图（看板 + 拖拽）
- [ ] Timeline 视图（时间线）

### 高级功能
- [ ] 过滤筛选（多维度条件组合）
- [ ] 项目管理（项目作为特殊 TODO）
- [ ] TODO 关系运算（依赖、阻塞、子任务）
- [ ] 分享功能（生成只读链接）
- [ ] 全文搜索（标题 + 内容）
- [ ] 数据导出（JSON/CSV）

### 扩展能力
- [ ] 自定义字段模板
- [ ] 插件机制（MCP 式扩展）
- [ ] AI 辅助（标题生成、摘要提取）
- [ ] 多端同步（云端可选）

---

## 💡 核心哲学映射

基于 brainstroming.md 的哲学，MVP 应体现：

1. ✅ **TODO 是原子单位** → 每个 TODO 独立存储（{id}.md）
2. ✅ **工作上下文容器** → Markdown 可记录资料、问题、思考
3. ✅ **本地优先存储** → 数据库 + Markdown 双存储
4. ✅ **记录为王** → 软删除（保留历史）
5. ✅ **数据主权** → 用户拥有所有 Markdown 文件
6. ⏳ **关系运算** → P1+ 实现（依赖、阻塞等）
7. ⏳ **可扩展平台** → P1+ 实现（插件机制）

---

**总计**: MVP 核心故事约 30 个，未来功能约 15+ 个

**下一步**: 讨论大纲是否合理，然后细化每个用户故事的验收标准
