# 3. 技术架构

### 3.1 整体架构

```
┌─────────────────────────────────────────────────┐
│                   Browser                       │
│  ┌───────────────────────────────────────────┐  │
│  │   React + TypeScript + shadcn/ui          │  │
│  │   - List / Table / Kanban / Timeline      │  │
│  │   - Markdown Editor                       │  │
│  │   - Filter Bar                            │  │
│  └───────────────────────────────────────────┘  │
└─────────────────┬───────────────────────────────┘
                  │ REST API (JSON)
                  │
┌─────────────────▼───────────────────────────────┐
│          ASP.NET Core  (C#)                     │
│  ┌──────────────────────────────────────────┐   │ 
│  │  Minimal API                             │   │
│  │  - Authentication (Cookie)               │   │
│  │  - TODO CRUD Endpoints                   │   │
│  │  - File Sync Service                     │   │
│  └──────────────────────────────────────────┘   │
└─────────────────┬───────────────────────────────┘
                  │
        ┌─────────┴─────────┐
        │                   │
┌───────▼──────┐   ┌────────▼─────────────────────┐
│   SQLite     │   │  Markdown Files              │
│  (Index DB)  │   │   data/todos/                │
│              │   │   data/projects/{guid}.md    │
│  - TodoIndex │   │                              │
│  - Metadata  │   │   (YAML Front Matter)        │
│  - Fast Query│   │                              │
└──────────────┘   └──────────────────────────────┘
```

### 3.2 技术栈详细

#### 后端

| 组件         | 技术选型              | 说明              |
| ------------ | --------------------- | ----------------- |
| **框架**     | ASP.NET Core          | Minimal API 模式  |
| **语言**     | C#                    | 使用最新特性      |
| **数据库**   | SQLite                | 轻量级，单文件    |
| **ORM**      | FreeSql               | 轻量，AOT 友好    |
| **认证**     | Cookie Authentication | ASP.NET Core 内置 |
| **YAML**     | 手动解析              | 简单正则即可      |
| **Markdown** | Markdig               | 用于预览（可选）  |


#### 前端

| 组件          | 技术选型             | 说明                |
| ------------- | -------------------- | ------------------- |
| **运行时**    | Bun(Ts)              | 包管理 + 开发服务器 |
| **框架**      | React                | 组件化 UI           |
| **构建工具**  | Vite                 | 快速构建            |
| **UI 组件**   | shadcn/ui            | 复制组件模式        |
| **样式**      | Tailwind CSS         | 实用优先            |
| **MD 编辑器** | @uiw/react-md-editor | 轻量，所见即所得    |
| **拖拽**      | @dnd-kit/core        | Kanban 视图         |
| **状态管理**  | Zustand              | 轻量状态管理        |
| **路由**      | React Router         | SPA 路由            |
| **HTTP**      | Axios                | API 请求            |


#### 部署

| 组件         | 技术选型       | 说明               |
| ------------ | -------------- | ------------------ |
| **容器化**   | Docker         | 单容器包含所有内容 |
| **反向代理** | Nginx (可选)   | HTTPS + 静态文件   |
| **部署平台** | VPS / 云服务器 | 用户自有服务器     |